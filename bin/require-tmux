#!/bin/bash
# Ensure you're in a tmux session.  If TMUX isn't set and isn't
# blank, and if TERM isn't/doesn't contain "screen", run "exec tmux $*" (by
# default, with no args, "tmux" is "tmux new").
if [[ ! $TERM =~ screen ]]; then
# TODO: lookup bash AND conditional.
if [[ "$TMUX" = "" ]]; then
# Allow TMUX to be automatically unset if TMUX_ is set to make nesting more
# convenient.
if [[ "$TMUX_" = "" ]]; then
    # http://unix.stackexchange.com/questions/1045/getting-256-colors-to-work-in-tmux
    export TERM=screen-256color
    exec tmux $*
fi
fi
fi
